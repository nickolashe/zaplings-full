<!-- startidea / new-book -->
<!doctype html>
{% load static %}
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zaplings | Connect to create.</title>
    <link rel="stylesheet" href="{% static "./style.css"%}" />
    <link href='http://fonts.googleapis.com/css?family=Varela+Round|Open+Sans:400,300' rel='stylesheet' type='text/css'>
      
      {% include "./zaplings/start-scripts.html" %}
    </head>
    <body>
      <div class="wrapper">
        
        {% include "./zaplings/header.html" %}

        <div class="row text-center">
          <div class="medium-8 medium-offset-2 column">
          {% if not user.idea %}
            <h3 class="titleCenter">Start your private idea book</h3>
          {% else %}
            <h3 class="titleCenter">Add a new idea</h3>
          {% endif %}
          </div>
        </div>

        <form id="form-new-idea"> <!-- insert form action / submit.php / etc here ~MC -->       {% csrf_token %}  
          <div class="row">
              <div class="medium-5 medium-offset-2 small-7 column">
                <input type="text" id="idea-title" name="idea-title" value="{{ idea.title }}" placeholder="Idea name">
              </div>
              <div class="medium-3 small-5 column end">
                <select name="idea-type" id="idea-type">
                  <option value="no-type-selected" disabled {% if not idea.type %}selected{% endif %}>Idea type</option>
                  <option value="service" {% if idea.type = "service" %}selected {% endif %}>Service</option>
                  <option value="product" {% if idea.type = "product" %}selected {% endif %}>Product</option>
                  <option value="cause" {% if idea.type = "cause" %}selected {% endif %}>Cause</option>
                  <option value="art" {% if idea.type = "art" %}selected {% endif %}>Art</option>
                  <option value="project" {% if idea.type = "project" %}selected {% endif %}>Project</option>
                  <option value="event" {% if idea.type = "event" %}selected {% endif %}>Event</option>
                  <option value="fun" {% if idea.type = "fun" %}selected {% endif %}>Fun</option>
                </select>
              </div>
          </div>
          <div class="row">
            <div class="medium-8 medium-offset-2 columns end">
              <textarea name="idea-description" id="idea-description" cols="30" rows="1" placeholder="A short sweet slogan goes here (100 characters max)" value="{{ idea.description }}" maxlength="100"></textarea>
              <textarea name="idea-notes" id="idea-notes" {% if not idea.notes %}class="hidden" {% endif %} rows="3" placeholder="Notes"></textarea>
            </div>
          </div>
          <div class="row controls">
            <div class="medium-8 medium-offset-2 columns end">
            {% if not idea.notes %}
              <button id="add-notes" class="button small round light">Add notes</button>
              {% endif %}
              <button class="button small round light" data-reveal-id="modal-share-now">Share Now</button>
              <a href="#"><button type="submit" class="button small round success">Start idea page</button></a>

            </div>
          </div>
      </form>
  <div class="push"></div>
</div>

  {% include "./zaplings/footer.html" %}

<div id="modal-share-now" class="reveal-modal" data-reveal>
  <h2>Share {{ idea.title }} Now</h2>
  <div class="row weekdays-or-weekends">
    <radio name="hashtags" id="whoswithme" value="whoswithme"></radio>
    <label for="whoswithme" class="button small light round">Who's with me?</label>
    <radio name="hashtags" id="zapling" value="zapling"></radio>
    <label for="" class="button small light round">Zapling</label>
    <radio name="hashtags" id="takeitandrun" value="takeitandrun"></radio>
    <label for="" class="button small light round">Take it and run</label>
  </div>
  <a href="https://twitter.com/intent/tweet?text=Check%20out%20{{ idea.title }}%20at&url={{ request.get_full_path }}" class="twitter-share-link">
    <button type="submit" class="button small round light">Share via Twitter</button>
  </a>
</div>

<!-- end of modals ~MC -->
<!--
for some reason they still don't work properly - the events fire correctly but nothing is displayed. Might there be something in the base classes that causes this?
need to investigate - first step is locating a clean copy of the big scss file which is normally pre-split and compiled into app.scss by bower or grunt.
-->

<script src="js/foundation.min.js"></script>
<script type="text/javascript">$(document).foundation();</script>
<script type="text/javascript">
  $(document).ready(function(){
    $("#add-notes").click(function(){
      $("#idea-notes").removeClass('hidden');
      $(this).remove();
        return false;
    });

    $('button').click(function(){
      $(this).blur();
    });
  });
</script>
<script>
  $("input:radio[name=hashtags]").click(function() {
      var value = $(this).val();
      var share_url = "https://twitter.com/intent/tweet?text=Check%20out%20{{ idea.title }}%20at&url={{ request.get_full_path }}&hashtags=" + value;
      $(".twitter-share-link").attr("href", share_url)
  });
</script>

{% include "./zaplings/end-scripts.html" %}

</body>
</html>